<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Topoyo Rafting Tours</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&amp;family=Inter:wght@400&amp;display=swap" rel="stylesheet"/>
<style>
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background-color: #fdfdfd;
      color: #222;
    }
    .lang-switcher {
      display: flex;
      justify-content: flex-end;
      padding: 1em;
      gap: 1em;
      background: #f1f1f1;
    }
    .lang-switcher a {
      text-decoration: none;
      font-size: 1.2em;
    }
    .hero {
      background: url('images/Topoyo.jpg') center/cover no-repeat;
      height: 90vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: white;
    }
    .hero h1 {
      font-family: 'Playfair Display', serif;
      font-size: 3em;
      margin-bottom: 1rem;
    }
    .hero button {
      background-color: #005bbb;
      color: white;
      padding: 1em 2em;
      border: none;
      border-radius: 5px;
      font-size: 1em;
      cursor: pointer;
    }
    .section {
      padding: 4em 2em;
      max-width: 1200px;
      margin: auto;
    }
    .section h2 {
      text-align: center;
      margin-bottom: 2em;
      font-family: 'Playfair Display', serif;
    }
    .cards {
      display: flex;
      justify-content: space-between;
      gap: 2em;
      flex-wrap: nowrap;
    }
    .card {
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      overflow: hidden;
      flex: 1;
      min-width: 0;
    }
    .card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
    }
    .card-content {
      padding: 1em;
      text-align: center;
    }
    .card-content h3 {
      margin: 0.5em 0;
      font-family: 'Inter', sans-serif;
    }
    .card-content p {
      font-size: 0.9em;
      color: #555;
    }
    .card-content .price {
      font-weight: bold;
      margin-top: 0.5em;
    }
    .features {
      display: flex;
      justify-content: space-between;
      gap: 2em;
      text-align: center;
      flex-wrap: nowrap;
    }
    .feature {
      flex: 1;
      min-width: 0;
    }
    .feature strong {
      display: block;
      font-size: 1.1em;
      margin-bottom: 0.5em;
    }
    .transportation {
      background: #f9f9f9;
      padding: 4em 2em;
      text-align: center;
    }
    .transportation img {
      width: 100%;
      max-width: 400px;
      height: auto;
      border-radius: 10px;
      margin: 2em 0;
    }
    .transportation p {
      max-width: 800px;
      margin: auto;
    }
    .contact-section {
      padding: 4em 2em;
      background: #fff;
    }
    .contact-section h2 {
      font-family: 'Playfair Display', serif;
      margin-bottom: 1em;
      text-align: center;
    }
    .contact-forms {
      display: flex;
      justify-content: center;
      gap: 2em;
      flex-wrap: nowrap;
    }
    .contact-column {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .contact-box {
      background: #f1f1f1;
      padding: 2em;
      border-radius: 10px;
      max-width: 400px;
      width: 100%;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    .contact-heading {
      font-family: 'Playfair Display', serif;
      font-size: 1.5em;
      margin-bottom: 0.5em;
      text-align: center;
    }
    .contact-box label {
      display: block;
      margin: 0.5em 0 0.2em;
      font-weight: bold;
    }
    .contact-box input[type="text"],
    .contact-box input[type="email"],
    .contact-box input[type="date"],
    .contact-box select {
      width: 100%;
      padding: 0.5em;
      margin-bottom: 1em;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-sizing: border-box;
    }
    .contact-box textarea {
      width: 100%;
      padding: 0.5em;
      margin-bottom: 1em;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-sizing: border-box;
      resize: vertical;
      min-height: 100px;
    }
    .contact-box input[type="submit"],
    .contact-box button[type="submit"] {
      background-color: #005bbb;
      color: white;
      padding: 0.75em 1em;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      width: 100%;
    }
    .note {
      text-align: center;
      margin-top: 2em;
      font-size: 1.1em;
    }
    @media (max-width: 900px) {
      .cards, .features, .contact-forms {
        flex-direction: column;
        align-items: center;
      }
      .card {
        max-width: 100% !important;
        flex: 1 1 100% !important;
      }
    }

    .contact-forms {
      align-items: stretch;
    }
    .contact-box {
      flex: 1 1 300px;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .contact-box form {
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .contact-box input[type="submit"] {
      margin-top: auto;
    }

    .lang-switcher img {
      width: 40px;
      height: 28px;
      object-fit: cover;
      display: block;
      margin: 0 auto;
    }
    .lang-switcher div {
      font-size: 0.75em;
      text-align: center;
    }

    .en { display: block; }
    .es { display: none; }
    .lang-es .en { display: none; }
    .lang-es .es { display: block; }

    #modal-description img {
      width: 100%;
      height: 250px;
      object-fit: cover;
      margin-bottom: 1em;
      border-radius: 8px;
    }

    .card img {
      height: 220px;
      object-fit: cover;
      width: 100%;
      border-top-left-radius: 10px;
      border-top-right-radius: 10px;
    }

    .card img {
      height: 220px;
      object-fit: cover;
      width: 100%;
      border-top-left-radius: 10px;
      border-top-right-radius: 10px;
    }

    #modal-description .image-row {
      display: flex;
      gap: 1em;
      margin-bottom: 1em;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }
    #modal-description .image-row img {
      flex: 0 0 280px;
      height: 160px;
      object-fit: cover;
      border-radius: 8px;
    }
    
    /* Scrollbar styling for webkit browsers */
    #modal-description .image-row::-webkit-scrollbar {
      height: 6px;
    }
    #modal-description .image-row::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 3px;
    }
    #modal-description .image-row::-webkit-scrollbar-thumb {
      background: #c1c1c1;
      border-radius: 3px;
    }
    #modal-description .image-row::-webkit-scrollbar-thumb:hover {
      background: #a8a8a8;
    }
</style>
</head>
<body>
<div class="lang-switcher">
<a href="#"><img alt="English" src="https://flagcdn.com/w40/us.png"/><div style="text-align: center; font-size: 0.75em; margin-top: 0.25em;">ENG</div></a>
<a href="#"><img alt="Español" src="https://flagcdn.com/w40/es.png"/><div style="text-align: center; font-size: 0.75em; margin-top: 0.25em;">ESP</div></a>
</div>

<section class="hero">
<h1><span class="en">Welcome to Topoyo Rafting Tours</span><span class="es">Bienvenido a Topoyo Rafting Tours</span></h1>
<button onclick="openTallyForm()"><span class="en">Book Your Tour</span><span class="es">Reserva Tu Tour</span></button>
</section>

<section class="section">
<h2><span class="en">Our Tours</span><span class="es">Nuestros Tours</span></h2>
<div class="cards" style="justify-content: center; text-align: center;">
<div class="card">
<h3><span class="en">Sarapiquí Safari</span><span class="es">Safari Sarapiquí</span></h3>
<img alt="Safari Sarapiquí" src="images/mono.png"/>
<p><span class="en">Relaxing river experience in lush nature.</span><span class="es">Experiencia relajante en el río rodeado de naturaleza.</span></p>
<button onclick="toggleTourModal('Sarapiquí Safari', 'Safari Sarapiquí', `Glide down the peaceful Sarapiquí river while spotting monkeys, toucans, iguanas, and more. A nature-focused experience perfect for wildlife lovers.&lt;br&gt;&lt;br&gt;&lt;strong&gt;Price:&lt;/strong&gt; $60 per person`, `Navega tranquilamente por el río Sarapiquí mientras observas monos, tucanes, iguanas y más. Una experiencia enfocada en la naturaleza perfecta para amantes de la fauna.&lt;br&gt;&lt;br&gt;&lt;strong&gt;Precio:&lt;/strong&gt; $60 por persona`, ['images/Topoyo.jpg', 'images/pajaro.png'])" style="background-color: #005bbb; color: white; padding: 0.75em 1em; border: none; border-radius: 5px; cursor: pointer; width: 100%; max-width: 200px;"><span class="en">View Tour</span><span class="es">Ver Tour</span></button>
<div style="margin-bottom: 1.5em;"></div>
</div>
<div class="card">
<h3><span class="en">Rafting Class 3</span><span class="es">Rafting Clase 3</span></h3>
<img alt="Rafting Class 3" src="images/clase3.jpeg"/>
<p><span class="en">Perfect for adrenaline lovers. Small groups.</span><span class="es">Perfecto para amantes de la adrenalina. Grupos pequeños.</span></p>
<button onclick="toggleTourModal('Rafting Class 3', 'Rafting Clase 3', `Navigate exciting class 3 rapids with our expert guides. Ideal for first-time rafters and families looking for safe adrenaline.&lt;br&gt;&lt;br&gt;&lt;strong&gt;Price:&lt;/strong&gt; $65 per person`, `Navega por rápidos clase 3 con nuestros guías expertos. Ideal para principiantes y familias que buscan adrenalina segura.&lt;br&gt;&lt;br&gt;&lt;strong&gt;Precio:&lt;/strong&gt; $65 por persona`, ['images/clase3-1.jpeg', 'images/clase3-2.jpeg'])" style="background-color: #005bbb; color: white; padding: 0.75em 1em; border: none; border-radius: 5px; cursor: pointer; width: 100%; max-width: 200px;"><span class="en">View Tour</span><span class="es">Ver Tour</span></button>
<div style="margin-bottom: 1.5em;"></div>
</div>
<div class="card">
<h3><span class="en">Rafting Class 4</span><span class="es">Rafting Clase 4</span></h3>
<img alt="Rafting Class 4" src="images/clase4.jpeg"/>
<p><span class="en">More intense whitewater for adventurers.</span><span class="es">Aguas bravas más intensas para aventureros.</span></p>
<button onclick="toggleTourModal('Rafting Class 4', 'Rafting Clase 4', `Conquer powerful class 4 rapids in one of Costa Rica's most thrilling river adventures. For those seeking high adrenaline and epic scenery.&lt;br&gt;&lt;br&gt;&lt;strong&gt;Price:&lt;/strong&gt; $75 per person`, `Conquista rápidos clase 4 en una de las aventuras fluviales más emocionantes de Costa Rica. Para los que buscan máxima adrenalina y paisajes épicos.&lt;br&gt;&lt;br&gt;&lt;strong&gt;Precio:&lt;/strong&gt; $75 por persona`, ['images/clase4-1.jpeg', 'images/clase4-2.jpeg'])" style="background-color: #005bbb; color: white; padding: 0.75em 1em; border: none; border-radius: 5px; cursor: pointer; width: 100%; max-width: 200px;"><span class="en">View Tour</span><span class="es">Ver Tour</span></button>
<div style="margin-bottom: 1.5em;"></div>
</div>
<div class="card">
<h3><span class="en">Rafting Full Day</span><span class="es">Rafting Día Completo</span></h3>
<img alt="Full Day Rafting" src="images/clase3y4.jpeg"/>
<p><span class="en">Full day rafting with lunch and breaks along the Sarapiquí river.</span><span class="es">Rafting de día completo con almuerzo y descansos a lo largo del río Sarapiquí.</span></p>
<button onclick="toggleTourModal('Rafting Full Day', 'Rafting Día Completo', `Enjoy a full day on the river with class 3 or 4 rapids, lunch break, and unforgettable natural surroundings.&lt;br&gt;&lt;br&gt;&lt;strong&gt;Price:&lt;/strong&gt; Class 3: $100 / Class 4: $110`, `Disfruta de un día completo en el río con rápidos clase 3 o 4, almuerzo y un entorno natural inolvidable.&lt;br&gt;&lt;br&gt;&lt;strong&gt;Precio:&lt;/strong&gt; Clase 3: $100 / Clase 4: $110`, ['images/clase3y4-1.jpeg', 'images/transporte.jpeg'])" style="background-color: #005bbb; color: white; padding: 0.75em 1em; border: none; border-radius: 5px; cursor: pointer; width: 100%; max-width: 200px;"><span class="en">View Tour</span><span class="es">Ver Tour</span></button>
<div style="margin-bottom: 1.5em;"></div>
</div>
</div>
</section>

<section class="section">
<h2><span class="en">Why Choose Us</span><span class="es">¿Por qué elegirnos?</span></h2>
<div class="features">
<div class="feature">
<img alt="Local Guide Icon" src="https://img.icons8.com/ios/50/trekking.png" style="width: 40px; height: 40px; margin-bottom: 0.5em;"/>
<strong><span class="en">Local Guides</span><span class="es">Guías Locales</span></strong>
<p><span class="en">Friendly and knowledgeable Costa Rican guides.</span><span class="es">Guías costarricenses amigables y conocedores.</span></p>
</div>
<div class="feature">
<img alt="Safety Icon" src="https://img.icons8.com/ios-filled/50/shield.png" style="width: 40px; height: 40px; margin-bottom: 0.5em;"/>
<strong><span class="en">Safety First</span><span class="es">Seguridad Primero</span></strong>
<p><span class="en">Top-quality equipment and training.</span><span class="es">Equipo de primera calidad y entrenamiento.</span></p>
</div>
<div class="feature">
<img alt="Water Icon" src="https://img.icons8.com/ios-filled/50/water-element.png" style="width: 40px; height: 40px; margin-bottom: 0.5em;"/>
<strong><span class="en">Authentic Experience</span><span class="es">Experiencia Auténtica</span></strong>
<p><span class="en">Real connection with nature and people.</span><span class="es">Conexión real con la naturaleza y las personas.</span></p>
</div>
<div class="feature">
<img alt="Small Groups Icon" src="https://img.icons8.com/ios-filled/50/000000/groups.png" style="width: 40px; height: 40px; margin-bottom: 0.5em;"/>
<strong><span class="en">Small Groups</span><span class="es">Grupos Pequeños</span></strong>
<p><span class="en">Personalized attention and flexible tours.</span><span class="es">Atención personalizada y tours flexibles.</span></p>
</div>
</div>
</section>

<section class="transportation">
<h2><span class="en">Transportation Services</span><span class="es">Servicios de Transporte</span></h2>
<p><span class="en">Contact us for personalized shuttle options and availability.</span><span class="es">Contáctanos para opciones personalizadas de transporte y disponibilidad.</span></p>
<div style="margin-top: 3em;">
<button id="transport-btn" onclick="toggleTransportDetails()" style="background-color: #005bbb; color: white; padding: 0.75em 1em; border: none; border-radius: 5px; cursor: pointer; width: 100%; max-width: 200px;">
<span class="en">More info</span><span class="es">Más información</span>
</button>
<div id="transport-details" style="display:none; margin-top:2em;">
<img alt="Transportation Van" src="images/transporte.jpeg" style="width:100%; border-radius:10px;"/>
<p style="margin-top:1em; max-width: 900px; margin-left:auto; margin-right:auto;"><span class="en">We offer transportation from the airport and anywhere in Costa Rica. We'll get you to your adventure safely and comfortably.</span><span class="es">Ofrecemos transporte desde el aeropuerto y cualquier parte de Costa Rica. Te llevamos a tu aventura con seguridad y comodidad.</span></p>
</div>
</div>
</section>

<section class="contact-section">
<div class="contact-forms">
<div class="contact-column">
<div class="contact-heading"><span class="en">Contact</span><span class="es">Contacto</span></div>
<div class="contact-box">
<form action="https://formspree.io/f/manjajkq" method="POST">
<label for="name1"><span class="en">Name *</span><span class="es">Nombre *</span></label>
<input id="name1" name="name" required="" type="text"/>
<label for="email1"><span class="en">Email *</span><span class="es">Correo electrónico *</span></label>
<input id="email1" name="email" required="" type="email"/>
<label for="whatsapp"><span class="en">WhatsApp Number *</span><span class="es">Número de WhatsApp *</span></label>
<input id="whatsapp" name="whatsapp" required="" type="text"/>
<label for="message"><span class="en">Message *</span><span class="es">Mensaje *</span></label>
<textarea id="message" name="message" rows="6" required=""></textarea>
<button type="submit">
<span class="en">Send</span><span class="es">Enviar</span>
</button>
</form>
</div>
</div>
<div class="contact-column">
<div class="contact-heading"><span class="en">Quick Booking</span><span class="es">Reserva Rápida</span></div>
<div class="contact-box">
<form id="booking-form">
<label for="name2"><span class="en">Name *</span><span class="es">Nombre *</span></label>
<input id="name2" name="fullName" type="text"/>
<label for="email2"><span class="en">Email *</span><span class="es">Correo electrónico *</span></label>
<input id="email2" name="emailAddress" type="email"/>
<label for="whatsapp2"><span class="en">WhatsApp Number *</span><span class="es">Número de WhatsApp *</span></label>
<input id="whatsapp2" name="whatsAppNumber" type="text"/>
<label for="date"><span class="en">Date *</span><span class="es">Fecha *</span></label>
<input id="date" name="tourDate" type="date"/>
<label for="tour"><span class="en">Tour *</span><span class="es">Tour *</span></label>
<select id="tour" name="requestedTour">
<option value="Safari">Safari</option>
<option value="Rafting Class 3">Rafting Class 3</option>
<option value="Rafting Class 4">Rafting Class 4</option>
<option value="Full-Day Rafting">Full-Day Rafting</option>
</select>
<button type="submit">
<span class="en">Book Now</span><span class="es">Reservar Ahora</span>
</button>
</form>
</div>
</div>
</div>
<div class="note">
<p><span class="en">📌 A 50% deposit is required to reserve your spot.<br/>Contact us to secure your adventure!</span><span class="es">📌 Se requiere un depósito del 50% para reservar su lugar.<br/>¡Contáctenos para asegurar su aventura!</span></p>
</div>
</section>

<a href="https://wa.me/50685832897" style="position: fixed; bottom: 20px; right: 20px; z-index: 1000;" target="_blank">
<img alt="WhatsApp" src="https://img.icons8.com/color/48/000000/whatsapp--v1.png" style="width:60px; height:60px;"/>
</a>

<div id="tour-modal" style="
  display: none;
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.7);
  z-index: 9999;
  align-items: center;
  justify-content: center;
">
<div style="background: white; padding: 2em; border-radius: 10px; max-width: 600px; width: 90%; position: relative; text-align: left;">
<h2 id="modal-title"></h2>
<p id="modal-description"></p>
<button onclick="toggleTourModal()" style="position: absolute; top: 10px; right: 10px; background: red; color: white; border: none; border-radius: 50%; width: 30px; height: 30px;">×</button>
</div>
</div>

<script>
function toggleTourModal(titleEn = '', titleEs = '', descriptionEn = '', descriptionEs = '', images = []) {
  const modal = document.getElementById('tour-modal');
  const titleEl = document.getElementById('modal-title');
  const descEl = document.getElementById('modal-description');

  if (modal.style.display === 'none' || modal.style.display === '') {
    titleEl.innerHTML = `<span class='en'>${titleEn}</span><span class='es'>${titleEs}</span>`;

    let imagesHtml = '<div class="image-row">';
    images.forEach(src => {
      imagesHtml += `<img src="${src}">`;
    });
    imagesHtml += '</div>';

    descEl.innerHTML = `<span class='en'>${imagesHtml + descriptionEn}</span><span class='es'>${imagesHtml + descriptionEs}</span>`;

    modal.style.display = 'flex';
  } else {
    modal.style.display = 'none';
  }
}

function toggleTransportDetails() {
  const details = document.getElementById('transport-details');
  const button = document.getElementById('transport-btn');
  const isEnglish = !document.body.classList.contains('lang-es');
  
  if (details.style.display === 'none' || details.style.display === '') {
    details.style.display = 'block';
    button.innerHTML = isEnglish 
      ? '<span class="en">Hide info</span><span class="es">Ocultar información</span>'
      : '<span class="en">Hide info</span><span class="es">Ocultar información</span>';
  } else {
    details.style.display = 'none';
    button.innerHTML = '<span class="en">More info</span><span class="es">Más información</span>';
  }
}

function openTallyForm(formData = null) {
  // Si no se pasan datos, recoger los datos del formulario de Quick Booking
  let data = formData;
  if (!data) {
    data = {
      name: document.getElementById('name2')?.value || '',
      email: document.getElementById('email2')?.value || '',
      whatsapp: document.getElementById('whatsapp2')?.value || '',
      tour: document.getElementById('tour')?.value || '',
      date: document.getElementById('date')?.value || ''
    };
  }
  
  const baseUrl = "https://tally.so/r/nrQlQL";
  const params = new URLSearchParams();
  
  // Mapear los campos del formulario a los parámetros de Tally
  if (data.name && data.name.trim()) params.append('fullName', data.name.trim());
  if (data.email && data.email.trim()) params.append('emailAddress', data.email.trim());
  if (data.whatsapp && data.whatsapp.trim()) params.append('whatsAppNumber', data.whatsapp.trim());
  if (data.tour && data.tour.trim()) params.append('requestedTour', data.tour.trim());
  if (data.date && data.date.trim()) params.append('tourDate', data.date.trim());
  
  const finalUrl = params.toString() ? `${baseUrl}?${params.toString()}` : baseUrl;
  
  window.open(finalUrl, '_blank');
}

function setDefaultDate() {
  const tomorrow = new Date();
  tomorrow.setDate(tomorrow.getDate() + 1);
  const tomorrowStr = tomorrow.toISOString().split('T')[0];
  
  const dateField = document.getElementById('date');
  if (dateField && !dateField.value) {
    dateField.value = tomorrowStr;
  }
}

function prefillFormFromURL() {
  const urlParams = new URLSearchParams(window.location.search);
  
  const fieldMappings = {
    'name': 'name2',
    'email': 'email2', 
    'whatsapp': 'whatsapp2',
    'tour': 'tour',
    'date': 'date'
  };

  Object.entries(fieldMappings).forEach(([param, fieldId]) => {
    const value = urlParams.get(param);
    const field = document.getElementById(fieldId);
    if (value && field) {
      field.value = value;
    }
  });
}

// Inicialización cuando el DOM esté listo
document.addEventListener('DOMContentLoaded', function() {
  // Configurar el manejador de envío del formulario de reserva rápida
  const bookingForm = document.getElementById('booking-form');
  if (bookingForm) {
    bookingForm.addEventListener('submit', function(e) {
      e.preventDefault(); // Prevenir el envío normal del formulario
      
      // Recoger los datos del formulario
      const formData = {
        name: document.getElementById('name2').value,
        email: document.getElementById('email2').value,
        whatsapp: document.getElementById('whatsapp2').value,
        tour: document.getElementById('tour').value,
        date: document.getElementById('date').value
      };
      
      // Abrir Tally con los datos prellenados
      openTallyForm(formData);
    });
  }

  // Configurar el switcher de idiomas
  document.querySelectorAll('.lang-switcher a').forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      
      if (this.href.includes('es') || this.querySelector('img').alt === 'Español') {
        document.body.classList.add('lang-es');
      } else {
        document.body.classList.remove('lang-es');
      }
    });
  });

  // Prellenar formulario desde URL al cargar la página
  prefillFormFromURL();
  
  // Establecer fecha por defecto (mañana)
  setDefaultDate();
});
</script>

</body>
</html>
